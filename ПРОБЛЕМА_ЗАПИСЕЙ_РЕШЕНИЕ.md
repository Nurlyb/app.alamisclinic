# –ü—Ä–æ–±–ª–µ–º–∞: –ó–∞–ø–∏—Å–∏ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
1. ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 3 –∑–∞–ø–∏—Å–∏
2. ‚ùå –ö–∞–ª–µ–Ω–¥–∞—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—É—Å—Ç—ã–µ —Å–ª–æ—Ç—ã
3. ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π —Ä–∞–±–æ—Ç–∞–µ—Ç
4. ‚úÖ WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω

### –ü—Ä–∏—á–∏–Ω–∞:
–°—Ç–∞—Ä—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏–º–µ—é—Ç **–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –≤—Ä–µ–º—è** (03:30, 04:00, 05:00 UTC), –∫–æ—Ç–æ—Ä–æ–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è **–≤–Ω–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ TIME_SLOTS** (08:00-20:00).

–ö–∞–ª–µ–Ω–¥–∞—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å–ª–æ—Ç—ã —Å 08:00 –¥–æ 20:00, –ø–æ—ç—Ç–æ–º—É –∑–∞–ø–∏—Å–∏ —Å –≤—Ä–µ–º–µ–Ω–µ–º 03:30-05:00 –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è.

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É–∂–µ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã

1. **Timezone fix –≤ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–ø–∏—Å–µ–π** (`AppointmentForm.tsx`):
   ```typescript
   const datetime = new Date(Date.UTC(
     parseInt(data.date.split('-')[0]), // year
     parseInt(data.date.split('-')[1]) - 1, // month
     parseInt(data.date.split('-')[2]), // day
     parseInt(hours),
     parseInt(minutes),
     0
   )).toISOString();
   ```

2. **Timezone fix –≤ API** (`app/api/appointments/route.ts`):
   ```typescript
   const hours = apt.datetime.getUTCHours().toString().padStart(2, '0');
   const minutes = apt.datetime.getUTCMinutes().toString().padStart(2, '0');
   ```

3. **Cache invalidation** - –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è

## üõ†Ô∏è –†–µ—à–µ–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É –∏ —É–¥–∞–ª–∏ —Å—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏:

```bash
ssh root@185.129.49.186

# –ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ PostgreSQL
sudo -u postgres psql clinic_db

# –£–¥–∞–ª–∏ –≤—Å–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏
DELETE FROM "Appointment";

# –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –∑–∞–ø–∏—Å–µ–π –Ω–µ—Ç
SELECT COUNT(*) FROM "Appointment";
-- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: 0

# –í—ã–π–¥–∏
\q
```

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Å–æ–∑–¥–∞–π –Ω–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å - –æ–Ω–∏ –±—É–¥—É—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º.

### –í–∞—Ä–∏–∞–Ω—Ç 2: –û–±–Ω–æ–≤–∏—Ç—å –≤—Ä–µ–º—è —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø–∏—Å–µ–π

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏, –æ–±–Ω–æ–≤–∏ –∏—Ö –≤—Ä–µ–º—è:

```bash
ssh root@185.129.49.186
sudo -u postgres psql clinic_db

-- –ü–æ—Å–º–æ—Ç—Ä–∏ —Ç–µ–∫—É—â–∏–µ –∑–∞–ø–∏—Å–∏
SELECT id, datetime, status FROM "Appointment";

-- –û–±–Ω–æ–≤–∏ –≤—Ä–µ–º—è –Ω–∞ 10:00 UTC (–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –≤—Ä–µ–º—è)
UPDATE "Appointment" 
SET datetime = datetime + INTERVAL '7 hours'
WHERE EXTRACT(HOUR FROM datetime) < 8;

-- –ü—Ä–æ–≤–µ—Ä—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
SELECT id, datetime, status FROM "Appointment";

\q
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ü—Ä–æ—Å—Ç–æ —Å–æ–∑–¥–∞–π –Ω–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏

–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± - –ø—Ä–æ—Å—Ç–æ —Å–æ–∑–¥–∞–π –Ω–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:

1. –û—Ç–∫—Ä–æ–π http://185.129.49.186:8888
2. –í–æ–π–¥–∏ –∫–∞–∫ –æ–ø–µ—Ä–∞—Ç–æ—Ä (+77001234568 / clinic123)
3. –ù–∞–∂–º–∏ "–°–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å" –Ω–∞ –ª—é–±–æ–º —Å–≤–æ–±–æ–¥–Ω–æ–º —Å–ª–æ—Ç–µ (08:00-20:00)
4. –ó–∞–ø–æ–ª–Ω–∏ —Ñ–æ—Ä–º—É –∏ —Å–æ–∑–¥–∞–π –∑–∞–ø–∏—Å—å
5. –ù–æ–≤–∞—è –∑–∞–ø–∏—Å—å –ø–æ—è–≤–∏—Ç—Å—è –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ä–µ—à–µ–Ω–∏—è:

1. **–û–±–Ω–æ–≤–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—É** –≤ –±—Ä–∞—É–∑–µ—Ä–µ (Ctrl+R –∏–ª–∏ Cmd+R)
2. **–ü—Ä–æ–≤–µ—Ä—å –∫–∞–ª–µ–Ω–¥–∞—Ä—å** - –Ω–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏ –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è
3. **–ü—Ä–æ–≤–µ—Ä—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É** - —Ü–∏—Ñ—Ä—ã –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –≤–∏–¥–∏–º—ã—Ö –∑–∞–ø–∏—Å–µ–π

## üìä –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### TIME_SLOTS –¥–∏–∞–ø–∞–∑–æ–Ω:
```typescript
// –ö–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç —Å 8:00 –¥–æ 20:00
const TIME_SLOTS = Array.from({ length: 24 }, (_, i) => {
  const hour = Math.floor(i / 2) + 8;
  const minute = i % 2 === 0 ? '00' : '30';
  return `${hour.toString().padStart(2, '0')}:${minute}`;
});
// –†–µ–∑—É–ª—å—Ç–∞—Ç: ['08:00', '08:30', '09:00', ..., '19:30', '20:00']
```

### –°—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –≤—Ä–µ–º—è):
```
03:30 UTC - –≤–Ω–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ TIME_SLOTS ‚ùå
04:00 UTC - –≤–Ω–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ TIME_SLOTS ‚ùå
05:00 UTC - –≤–Ω–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ TIME_SLOTS ‚ùå
```

### –ù–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –≤—Ä–µ–º—è):
```
10:00 UTC - –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ TIME_SLOTS ‚úÖ
14:30 UTC - –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ TIME_SLOTS ‚úÖ
16:00 UTC - –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ TIME_SLOTS ‚úÖ
```

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–ò—Å–ø–æ–ª—å–∑—É–π –í–∞—Ä–∏–∞–Ω—Ç 1** (—É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏):
- –°–∞–º—ã–π —á–∏—Å—Ç—ã–π —Å–ø–æ—Å–æ–±
- –ù–µ—Ç —Ä–∏—Å–∫–∞ –æ—à–∏–±–æ–∫
- –ù–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏ –±—É–¥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

–ü–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø–∏—Å–µ–π:
1. –°–æ–∑–¥–∞–π 2-3 —Ç–µ—Å—Ç–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
2. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –æ–Ω–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ
3. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ–≤–ø–∞–¥–∞–µ—Ç

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ä–µ—à–µ–Ω–∏—è –≤—Å–µ –Ω–æ–≤—ã–µ –∑–∞–ø–∏—Å–∏ –±—É–¥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.
